# workflows/pure_agent_data.yaml
name: "çº¯Agentå·¥ä½œæµæ¼”ç¤º"
description: "å±•ç¤ºå¦‚ä½•ä½¿ç”¨type: agentçš„ä¸“é—¨æ­¥éª¤"

workflow:
  - step: é€‰æ‹©åˆ†æè´§å¸å¯¹
    type: input
    config:
      prompt: "è¯·é€‰æ‹©è¦åˆ†æçš„è´§å¸å¯¹"
      type: "choice"
      choices: ["EUR/USD", "GBP/USD", "USD/JPY", "AUD/USD"]
      default: "EUR/USD"
    output: selected_pair

  - step: é€šè¿‡Agentè·å–å®æ—¶æ•°æ®
    type: agent  # ä¸“é—¨ä½¿ç”¨agentç±»å‹
    agent: data_fetcher  # æŒ‡å®šä½¿ç”¨å“ªä¸ªAgent
    inputs:
      currency_pair: "{{selected_pair}}"
      data_type: "realtime"
    store_result_as: realtime_data

  - step: æ˜¾ç¤ºå®æ—¶æ•°æ®ç»“æœ
    type: print
    config:
      message: |
        ## ğŸ¤– Agentå®æ—¶æ•°æ®ç»“æœ
        
        **Agentåç§°**: {{realtime_data.agent}}
        **è´§å¸å¯¹**: {{realtime_data.currency_pair}}
        **å½“å‰æ±‡ç‡**: {{realtime_data.data.exchange_rate}}
        **æ¶¨è·Œå¹…**: {{realtime_data.data.percent_change}}%
        **æ›´æ–°æ—¶é—´**: {{realtime_data.data.timestamp}}
        
        *æ‰§è¡ŒçŠ¶æ€: {{realtime_data.success}}*

  - step: é€šè¿‡Agentè·å–å†å²æ•°æ®
    type: agent
    agent: data_fetcher
    inputs:
      currency_pair: "{{selected_pair}}"
      data_type: "historical"
      interval: "1h"
      output_size: 5
    store_result_as: historical_data

  - step: æ˜¾ç¤ºå†å²æ•°æ®æ‘˜è¦
    type: print
    config:
      message: |
        ## ğŸ“Š Agentå†å²æ•°æ®æ‘˜è¦
        
        **Agent**: {{historical_data.agent}}
        **æ•°æ®æ¡æ•°**: {{historical_data.summary.record_count}}
        **æ—¥æœŸèŒƒå›´**: {{historical_data.summary.date_range.start}} åˆ° {{historical_data.summary.date_range.end}}
        **å¹³å‡æ”¶ç›˜ä»·**: {{historical_data.summary.price_stats.close_mean | round(4)}}

  - step: æ˜¾ç¤ºä½¿ç”¨ç»Ÿè®¡
    type: print
    config:
      message: |
        ## ğŸ“ˆ Agentä½¿ç”¨ç»Ÿè®¡
        
        è¿™æ˜¯ä¸€ä¸ªå®Œå…¨åŸºäºAgentçš„å·¥ä½œæµæ¼”ç¤ºï¼
        
        **ç‰¹ç‚¹**:
        - ä½¿ç”¨ä¸“é—¨çš„ `type: agent` æ­¥éª¤ç±»å‹
        - ä¸ä¾èµ–ä¼ ç»Ÿå·¥å…·æœåŠ¡å™¨
        - ç›´æ¥è°ƒç”¨æ³¨å†Œçš„Agentå®ä¾‹
        - æ›´å¥½çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€åé¦ˆ

variables:
  default_currency: "EUR/USD"