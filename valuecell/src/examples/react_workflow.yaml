name: "react_interactive_forex_fixed"
description: "ä¿®å¤ç‰ˆå¤–æ±‡åˆ†æå·¥ä½œæµ"

tools:
  - name: "data_fetcher"
    server_type: "data_fetcher"
    parameters:
      api_key: "${TWELVEDATA_API_KEY}"

  - name: "technical_analyzer" 
    server_type: "technical_analyzer"
    parameters:
      openai_api_key: "${OPENAI_API_KEY}"
      openai_base_url: "${OPENAI_BASE_URL}"

  - name: "economic_calendar"
    server_type: "economic_calendar"
    parameters:
      alpha_api_key: "${ALPHA_VANTAGE_API_KEY}"

workflow:
  - step: "welcome_message"
    type: "print"
    config:
      message: "ğŸ¯ æ¬¢è¿ä½¿ç”¨å¤–æ±‡æ™ºèƒ½åˆ†æç³»ç»Ÿ"

  - step: "select_currency_pair"
    type: "input"
    config:
      prompt: "è¯·é€‰æ‹©è´§å¸å¯¹ï¼š"
      default: "EUR/USD"
      type: "choice"
      choices: ["EUR/USD", "GBP/USD", "USD/JPY", "AUD/USD"]
    output: "currency_pair"

  - step: "fetch_market_data"
    tool: "data_fetcher"
    method: "fetch_data"
    inputs:
      currency_pair: "{{currency_pair}}"
      data_type: "historical"
      interval: "1day"
      output_size: 50
    store_result_as: "market_data"

  - step: "technical_analysis"
    tool: "technical_analyzer"
    method: "generate_signals"
    inputs:
      data: "{{market_data}}"
      symbol: "{{currency_pair}}"
      use_ai: true
    store_result_as: "technical_data"

  - step: "economic_analysis"
    tool: "economic_calendar"
    method: "get_trading_analysis"
    inputs:
      currency_pair: "{{currency_pair}}"
      days_ahead: 3
    store_result_as: "economic_data"

  # ========== ä¿®æ­£å˜é‡è·¯å¾„ ==========
  - step: "display_technical_results"
    type: "print"
    config:
      message: |
        ğŸ“Š æŠ€æœ¯åˆ†æç»“æœ:
        çŠ¶æ€: {{technical_data.success}}
        {{#technical_data.success}}
        å½“å‰ä»·æ ¼: {{technical_data.price}}
        äº¤æ˜“å»ºè®®: {{technical_data.composite_signal.recommendation}}
        ç½®ä¿¡åº¦: {{technical_data.composite_signal.confidence}}%
        {{/technical_data.success}}
        {{^technical_data.success}}
        é”™è¯¯: {{technical_data.error}}
        {{/technical_data.success}}

  - step: "display_economic_results"
    type: "print"
    config:
      message: |
        ğŸ“… ç»æµæ—¥å†ç»“æœ:
        çŠ¶æ€: {{economic_data.success}}
        {{#economic_data.success}}
        æ€»äº‹ä»¶æ•°: {{economic_data.economic_calendar_analysis.total_events}}
        é«˜å½±å“äº‹ä»¶: {{economic_data.economic_calendar_analysis.high_impact_events}}
        æ•°æ®æœŸé—´: {{economic_data.economic_calendar_analysis.period_covered}}
        {{/economic_data.success}}
      
  - step: "display_summary"
    type: "print"
    config:
      message: |
        ğŸ“ˆ åˆ†ææ€»ç»“
        è´§å¸å¯¹: {{currency_pair}}
        åˆ†ææ·±åº¦: standard
        ç”¨æˆ·é—®é¢˜: åˆ†æEUR/USDçš„å½“å‰èµ°åŠ¿

  - step: "goodbye_message"
    type: "print"
    config:
      message: "ğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨å¤–æ±‡æ™ºèƒ½åˆ†æç³»ç»Ÿï¼"