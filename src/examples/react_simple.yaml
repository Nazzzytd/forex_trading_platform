name: "react_interactive_forex_fixed"
description: "ç®€æ´ç‰ˆå¤–æ±‡åˆ†æå·¥ä½œæµ"

tools:
  - name: "data_fetcher"
    server_type: "data_fetcher"
    parameters:
      api_key: "${TWELVEDATA_API_KEY}"

  - name: "technical_analyzer" 
    server_type: "technical_analyzer"
    parameters:
      openai_api_key: "${OPENAI_API_KEY}"
      openai_base_url: "${OPENAI_BASE_URL}"

  - name: "economic_calendar"
    server_type: "economic_calendar"
    parameters:
      alpha_api_key: "${ALPHA_VANTAGE_API_KEY}"

workflow:
  - step: "welcome_message"
    type: "print"
    config:
      message: "ğŸ¯ å¤–æ±‡æ™ºèƒ½åˆ†æç³»ç»Ÿ"

  - step: "select_currency_pair"
    type: "input"
    config:
      prompt: "è¯·é€‰æ‹©è´§å¸å¯¹"
      default: "EUR/USD"
      type: "choice"
      choices: ["EUR/USD", "GBP/USD", "USD/JPY", "AUD/USD"]
    output: "currency_pair"

  - step: "fetch_market_data"
    tool: "data_fetcher"
    method: "fetch_data"
    inputs:
      currency_pair: "{{currency_pair}}"
      data_type: "historical"
      interval: "1day"
      output_size: 50
    store_result_as: "market_data"

  - step: "technical_analysis"
    tool: "technical_analyzer"
    method: "generate_signals"
    inputs:
      data: "{{market_data}}"
      symbol: "{{currency_pair}}"
      use_ai: true
    store_result_as: "technical_data"

  - step: "economic_analysis"
    tool: "economic_calendar"
    method: "get_trading_analysis"
    inputs:
      currency_pair: "{{currency_pair}}"
      days_ahead: 3
    store_result_as: "economic_data"

  # ========== ç®€æ´ç‰ˆè¾“å‡º ==========
  - step: "display_main_analysis"
    type: "print"
    config:
      message: |
        ğŸ“ˆ å¤–æ±‡åˆ†ææŠ¥å‘Š
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        ğŸ’¹ è´§å¸å¯¹: {{currency_pair}}
        ğŸ’° å½“å‰ä»·æ ¼: {{technical_data.price}}
        
        ğŸ¯ äº¤æ˜“ä¿¡å·: {{technical_data.composite_signal.recommendation}}
        ğŸ“Š ç½®ä¿¡åº¦: {{technical_data.composite_signal.confidence}}%
        
        ğŸ“… ç»æµäº‹ä»¶: {{economic_data.economic_calendar_analysis.total_events}}ä¸ª
                   ({{economic_data.economic_calendar_analysis.high_impact_events}}ä¸ªé«˜å½±å“äº‹ä»¶)

  - step: "display_ai_analysis"
    type: "print"
    config:
      message: |
        ğŸ¤– AIæ·±åº¦åˆ†æ
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        {{technical_data.ai_analysis}}

  - step: "display_technical_details"
    type: "print"
    config:
      message: |
        ğŸ“Š æŠ€æœ¯æŒ‡æ ‡è¯¦æƒ…
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â€¢ RSI: {{technical_data.rsi}} 
        â€¢ MACD: {{technical_data.macd}}
        â€¢ è¶‹åŠ¿æ–¹å‘: {{technical_data.trend}}
        â€¢ æ³¢åŠ¨ç‡: {{technical_data.volatility}}
        â€¢ å¸ƒæ—å¸¦: {{technical_data.bollinger_bands}}
        â€¢ éšæœºæŒ‡æ ‡: {{technical_data.stochastic}}

  - step: "display_economic_context"
    type: "print"
    config:
      message: |
        ğŸ“… å¸‚åœºç¯å¢ƒåˆ†æ
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        {{economic_data.market_context}}
        
        ğŸ’¡ äº¤æ˜“å»ºè®®: {{economic_data.trading_recommendation}}

  - step: "display_final_summary"
    type: "print"
    config:
      message: |
        ğŸ“‹ æœ€ç»ˆæ€»ç»“
        â”€â”€â”€â”€â”€â”€â”€â”€
        âœ… åˆ†æå®Œæˆæ—¶é—´: {{technical_data.timestamp}}
        ğŸ“ˆ æ€»ä½“å»ºè®®: {{technical_data.composite_signal.recommendation}}
        ğŸ¯ æ“ä½œå»ºè®®: æ ¹æ®{{technical_data.composite_signal.confidence}}%ç½®ä¿¡åº¦{{technical_data.composite_signal.recommendation}}

  - step: "goodbye_message"
    type: "print"
    config:
      message: "ğŸ‘‹ åˆ†æå®Œæˆï¼Œæ„Ÿè°¢ä½¿ç”¨ï¼"